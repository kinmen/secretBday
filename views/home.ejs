<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  </head>

  <body>
    <div class = "cover slide_in">
      <div class = "top_gate">
        <form id = "name-form" class = "form">
          <input type = "text" name = "firstName" placeholder="First Name"/>
          <br/>
          <input type = "text" name = "gameName" placeholder="Gamer Name"/>
          <br/>
          <button class = "myButton" type = "submit">Confirm</button>
        </form>
      </div>

      <div class = "bottom_gate">
        <div id = "errormsg" class = "errormsg">Enter your First name and Gamer name above.</div>
      </div>

      <div id = "successmsg" class = "successmsg">success</div>


    </div>
  
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script type="text/javascript">
    $(function(){
      $("#name-form").submit(function(e) {
          var formData = $(this).serialize();
          e.preventDefault();
          $.ajax({
              type : 'GET', 
              url : "user",
              data : formData,
              dataType : 'json',
              success: function(data){
                console.log(data);

                var curDate = new Date();
                var curMonth = curDate.getMonth()+1;
                var curDay = curDate.getDate();

                if ((curMonth == data.birthMonth) && (curDay == data.birthDay)) {
                  var successmessage = "Happy birthday"

                  if ((data.gameName === "HxCGirl") && (data.firstName === "Athina")) {
                    successmessage = " <div class ='hbd'> Happy Birthday Tina!! </div>" + 
                    "It's not much but I told you I'd give you something more than just a hug lol. And hey at least you can say somebody built a website from scratch just for your birthday :P";
                  }

                  $("div#successmsg").html(successmessage);
                  $("div.cover").addClass("open");
                } else {
                  var errmessage = "It ain't even yo birthday right now gtfo."
                  $("div#errormsg").html(errmessage);
                }
              },
              error: function(jqxhr){
                  // var errmessage = $.parseJSON(jqxhr.responseText).message;
                  // console.log(errmessage);
                  var errmessage = "Either you typed in the name wrong, or I don't know who the fuck you are. Or maybe this shit just ain't for you."
                  $("div#errormsg").html(errmessage);
              }
          })
      })
    })

    </script>

  </body>
</html>
